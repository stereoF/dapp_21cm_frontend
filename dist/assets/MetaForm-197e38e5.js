import{d as C,s as A,g as u,h as D,u as S,y as b,_ as $,o as c,c as p,b as e,i as n,v as d,F as m,j as g,p as I,m as E}from"./index-6aaf6acf.js";import{D as M}from"./DeSciPrint-fa65339c.js";import{u as P}from"./upload-ad8f6267.js";import{C as B}from"./index-24014245.js";const T=C({name:"MetaInfo",props:{address:{type:String,required:!0}},async setup(o,l){const _=P(),{cid:f}=A(_),h=u(""),v=u(""),t=D({authors:[{name:"",email:"",workplace:""}],fields:[{field:""}]}),{provider:a}=await S(),s=new B(o.address,M.abi,a);let y=await s.gasFee(0),k=await s.gasFee(4),w=b(y),F=b(k);const U=u(F),V=u(w);return{cid:f,title:h,abstract:v,...t,addAuthor:i=>{t.authors.splice(i+1,0,{name:"",email:"",workplace:""})},removeAuthor:i=>{t.authors.length>1&&t.authors.splice(i,1)},addField:i=>{t.fields.splice(i+1,0,{field:""})},removeField:i=>{t.fields.length>1&&t.fields.splice(i,1)},donate:U,gas:V}}});const r=o=>(I("data-v-501064a7"),o=o(),E(),o),G={class:"form-group"},N=r(()=>e("label",{for:"cid"},"CID:",-1)),j={class:"form-group"},q=r(()=>e("label",{for:"title"},"Title:",-1)),L={class:"form-group"},R=r(()=>e("label",{for:"authors"},"Authors:",-1)),W={class:"col-3 pr-1"},z=["onUpdate:modelValue"],H={class:"col-4 px-1"},J=["onUpdate:modelValue"],K={class:"col-4 pl-1"},O=["onUpdate:modelValue"],Q={class:"col-1 author-buttons"},X=["onClick"],Y=["onClick"],Z={class:"form-group"},x=r(()=>e("label",{for:"fields"},"Fields:",-1)),ee={class:"col-10 pr-1"},te=["onUpdate:modelValue"],oe={class:"col-1 author-buttons"},se=["onClick"],le=["onClick"],ae={class:"form-group"},ne=r(()=>e("label",{for:"abstract"},"Abstract:",-1)),de={class:"form-group"},ie=r(()=>e("label",{for:"donate"},"Donate to editors and reviewers",-1)),re={class:"form-group"},ce=r(()=>e("label",{for:"gas"},"Pay gas fee to editors and reviewers",-1));function pe(o,l,_,f,h,v){return c(),p(m,null,[e("div",G,[N,n(e("input",{type:"text",id:"cid",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=t=>o.cid=t),placeholder:"Select directory to get CID"},null,512),[[d,o.cid]])]),e("div",j,[q,n(e("input",{type:"text",id:"title",class:"form-control","onUpdate:modelValue":l[1]||(l[1]=t=>o.title=t)},null,512),[[d,o.title]])]),e("div",L,[R,(c(!0),p(m,null,g(o.authors,(t,a)=>(c(),p("div",{key:a,class:"row align-items-center"},[e("div",W,[n(e("input",{type:"text","onUpdate:modelValue":s=>t.name=s,placeholder:"Name",class:"form-control"},null,8,z),[[d,t.name]])]),e("div",H,[n(e("input",{type:"email","onUpdate:modelValue":s=>t.email=s,placeholder:"Email",class:"form-control"},null,8,J),[[d,t.email]])]),e("div",K,[n(e("input",{type:"text","onUpdate:modelValue":s=>t.workplace=s,placeholder:"Workplace",class:"form-control"},null,8,O),[[d,t.workplace]])]),e("div",Q,[e("div",null,[e("button",{type:"button",onClick:s=>o.addAuthor(a),class:"btn btn-success btn-sm"},"+",8,X)]),e("div",null,[e("button",{type:"button",onClick:s=>o.removeAuthor(a),class:"btn btn-danger btn-sm"},"-",8,Y)])])]))),128))]),e("div",Z,[x,(c(!0),p(m,null,g(o.fields,(t,a)=>(c(),p("div",{key:a,class:"row align-items-center"},[e("div",ee,[n(e("input",{type:"text","onUpdate:modelValue":s=>t.field=s,placeholder:"Field",class:"form-control"},null,8,te),[[d,t.field]])]),e("div",oe,[e("div",null,[e("button",{type:"button",onClick:s=>o.addField(a),class:"btn btn-success btn-sm"},"+",8,se)]),e("div",null,[e("button",{type:"button",onClick:s=>o.removeField(a),class:"btn btn-danger btn-sm"},"-",8,le)])])]))),128))]),e("div",ae,[ne,n(e("textarea",{id:"abstract","onUpdate:modelValue":l[2]||(l[2]=t=>o.abstract=t),class:"form-control"},null,512),[[d,o.abstract]])]),e("div",de,[ie,n(e("input",{type:"text",id:"donate","onUpdate:modelValue":l[3]||(l[3]=t=>o.donate=t),class:"form-control"},null,512),[[d,o.donate]])]),e("div",re,[ce,n(e("input",{type:"text",id:"gas","onUpdate:modelValue":l[4]||(l[4]=t=>o.gas=t),class:"form-control"},null,512),[[d,o.gas]])])],64)}const ye=$(T,[["render",pe],["__scopeId","data-v-501064a7"]]);export{ye as M};
