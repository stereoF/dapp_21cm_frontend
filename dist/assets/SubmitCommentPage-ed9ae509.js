import{D}from"./DeSciPrint-fa65339c.js";import{F as A}from"./FileUpload-4c08f7c5.js";import{d as k,s as L,g as i,u as P,_ as V,r as S,o as a,c as n,b as r,i as T,v as j,a as _,w as u,F as x,j as M,e as y,k as w,l as Y,p as F,m as U,n as f,f as I,S as $}from"./index-6aaf6acf.js";import{u as z}from"./upload-ad8f6267.js";import{C as q}from"./index-24014245.js";import{P as E}from"./PaperInfo-b25b6f5f.js";const W=k({name:"SubmitCommentCID",props:{address:{type:String,required:!0},paperCID:{type:String,required:!0}},async setup(t){const e=z(),{cid:s}=L(e),l=i(!1),d=i(!1),p=i(1),m=[{value:1,label:"revise"},{value:2,label:"reject"},{value:3,label:"pass"}],{provider:c}=await P(),o=c.getSigner(),b=new q(t.address,D.abi,c).connect(o);return{cid:s,submitFailed:l,submitSucceed:d,contractCall:async()=>{try{await b.reviewPrint(t.paperCID,s,p.value),d.value=!0,l.value=!1}catch(g){console.error(g),l.value=!0,d.value=!1}finally{s.value=""}},value:p,options:m}}});const B=t=>(F("data-v-2614e758"),t=t(),U(),t),G={class:"form-group d-flex align-items-center"},H=B(()=>r("label",{for:"cid",class:"mr-2"},"CID:",-1)),J=B(()=>r("button",{id:"contractCall",type:"submit",class:"btn btn-primary ml-2"},"Submit",-1)),K={class:"row mt-2"},O={class:"col-12 col-sm-4 mt-2 mt-sm-0"},Q={key:0,class:"text-danger"},X={key:1,class:"text-success"};function Z(t,e,s,l,d,p){const m=S("el-option"),c=S("el-select");return a(),n("form",{onSubmit:e[2]||(e[2]=Y((...o)=>t.contractCall&&t.contractCall(...o),["prevent"]))},[r("div",G,[H,T(r("input",{type:"text",id:"cid",class:"form-control mr-2","onUpdate:modelValue":e[0]||(e[0]=o=>t.cid=o),placeholder:"Select directory to get CID"},null,512),[[j,t.cid]]),_(c,{modelValue:t.value,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value=o),class:"m-2",placeholder:"Select",size:"large"},{default:u(()=>[(a(!0),n(x,null,M(t.options,o=>(a(),y(m,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),J]),r("div",K,[r("div",O,[t.submitFailed?(a(),n("div",Q,"Submit failed")):w("",!0),t.submitSucceed?(a(),n("div",X,"Submit succeed")):w("",!0)])])],32)}const ee=V(W,[["render",Z],["__scopeId","data-v-2614e758"]]),C=t=>(F("data-v-ad6882c7"),t=t(),U(),t),te={class:"common-layout"},se={key:0,class:"text-danger"},oe={key:1},ae=C(()=>r("div",{class:"divider"},null,-1)),re={key:0},ne=C(()=>r("h3",{class:"title"},"Upload your review comments and make your decision",-1)),ie={class:"container"},le={class:"file-upload-container"},de={key:1},ce=C(()=>r("h3",{class:"title"},"You have already submitted your review comments.",-1)),ue=[ce],pe=k({__name:"SubmitCommentPage",props:{address:{type:String,required:!0},paperCID:{type:String,required:!0}},async setup(t){let e,s;const l=t,{provider:d}=([e,s]=f(()=>P()),e=await e,s(),e),p=new q(l.address,D.abi,d),m=i(l.paperCID),c=i(([e,s]=f(()=>d.getSigner().getAddress()),e=await e,s(),e)),o=i(([e,s]=f(()=>p._isReviewer(m.value,c.value)),e=await e,s(),e)),h=i(([e,s]=f(()=>p.deSciReviews(m.value,c.value)),e=await e,s(),e)),b=i(h.value.reviewerStatus);return(v,g)=>{const N=S("el-main"),R=S("el-container");return a(),n("div",te,[_(R,null,{default:u(()=>[_(N,null,{default:u(()=>[o.value?(a(),n("div",oe,[r("div",null,[(a(),y($,null,{fallback:u(()=>[I(" Loading... ")]),default:u(()=>[_(E,{address:v.$props.address,cid:v.$props.paperCID},null,8,["address","cid"])]),_:1}))]),ae,b.value==0?(a(),n("div",re,[ne,r("div",ie,[r("div",le,[_(A)]),(a(),y($,null,{fallback:u(()=>[I(" Loading... ")]),default:u(()=>[_(ee,{address:v.$props.address,paperCID:v.$props.paperCID},null,8,["address","paperCID"])]),_:1}))])])):(a(),n("div",de,ue))])):(a(),n("div",se,"You are not the reviewer of this paper"))]),_:1})]),_:1})])}}});const ye=V(pe,[["__scopeId","data-v-ad6882c7"]]);export{ye as default};
