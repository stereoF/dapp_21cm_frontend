import{D as w}from"./DeSciPrint-fa65339c.js";import{M as S}from"./ManagerFields-c19fd72a.js";import{d as y,g as o,u as C,h as F,_ as k,r as E,o as l,c as d,b as i,t as M,a as A,k as b,l as $}from"./index-6aaf6acf.js";import{C as B}from"./index-24014245.js";const D=y({name:"AssignEditors",props:{address:{type:String,required:!0}},async setup(e){const r=o(),{provider:a}=await C(),s=new B(e.address,w.abi,a),p=o(await s.name()),c=F(await s.editors()),u=o(await a.getSigner().getAddress()),n=o(await s.owner()===u.value);let m=o(!1),f=o(!1);return{title:p,contractCall:async()=>{let v=r.value.fields.map(t=>t.field),g=c.filter(t=>v.includes(t)),_=v.filter(t=>!g.includes(t)),h=c.filter(t=>!g.includes(t));try{_.length>0&&await s.connect(a.getSigner()).pushEditors(_),h.length>0&&await s.connect(a.getSigner()).removeEditor(h),f.value=!0,m.value=!1}catch(t){console.error(t),m.value=!0,f.value=!1}},submitFailed:m,submitSucceed:f,editors:c,editorFields:r,isOwner:n}},components:{ManagerFields:S}}),N={class:"container"},P={key:0,class:"text-danger"},V={key:1},j={class:"row mt-2"},L=i("div",{class:"col-12 col-sm-8"},[i("button",{id:"contractCall",type:"submit",class:"btn btn-primary"},"Submit")],-1),O={class:"col-12 col-sm-4 mt-2 mt-sm-0"},q={key:0,class:"text-danger"},Y={key:1,class:"text-success"};function z(e,r,a,s,p,c){const u=E("ManagerFields");return l(),d("div",N,[i("h1",null,"Manager the editors of journal: "+M(e.title),1),e.isOwner?(l(),d("div",V,[i("form",{onSubmit:r[0]||(r[0]=$((...n)=>e.contractCall&&e.contractCall(...n),["prevent"]))},[A(u,{"field-name":"Editor",fields:e.editors.map(n=>({field:n})),ref:"editorFields"},null,8,["fields"]),i("div",j,[L,i("div",O,[e.submitFailed?(l(),d("div",q,"Submit failed")):b("",!0),e.submitSucceed?(l(),d("div",Y,"Submit succeed")):b("",!0)])])],32)])):(l(),d("div",P,"You are not the owner of this journal"))])}const Q=k(D,[["render",z]]);export{Q as default};
